body {
  /* Set line height to 1.5 times the font size
	   and use the OS’s UI font as the website font
	 */
  font: 100%/1.5 system-ui;
  max-width: 100ch;
  margin-inline: max(1em, (100% - 100ch) / 2); /* center content with padding in case window gets too small */
}

nav{
  display: flex; /* enable flexible box layout for children */
  margin-bottom: 0.5em; /* separate nav bar from rest of content */
  border-bottom-width: 1px; /* visually separate nav bar from rest of content */
  border-bottom-style: solid;
  border-bottom-color: oklch(80% 3% 200);
  --border-color: oklch(50% 10% 200 / 40%); /* custom property that children can access */ 
}

nav a{
  flex: 1; /* make anchor elements take up same space within nav */
  text-decoration: none; /* remove underrline from links */
  color: inherit; /* remove default link color and make it use same text color as parent */ 
  text-align: center; /* center text in box */
  padding: 0.5em; /* give each link spacing */ 
}

a:hover{
  /* background-color: oklch(from var(--color-accent) 95% 5% h); */ /* lighter color with same hue as --color-accent */ 
  background-color: color-mix(in oklch, var(--color-accent), canvas 85%); /* mix with canvas color for dark mode */ 
  /* border-bottom-color: var(--border-color); */ 
  border-bottom-color: var(--color-accent);
}

.current{
  border-bottom-width: 0.4em;
  border-bottom-style: solid;
  border-bottom-color: oklch(50% 10% 200 / 40%); /* oklch(80% 3% 200); added 40% opacity */
}

html{
  --color-accent: oklch(65% 50% 0); /* Custom property. All children elements of html can access it */
  accent-color: var(--color-accent);
  color-scheme: dark; /* forces a color scheme. Can also be light, or light dark which chooses color scheme based on user OS */
}

form {
  display: grid;
  grid-template-columns: auto 1fr; /* auto means that the column will be as wide as its content, and 1fr means that the column will take up the remaining space (similar to flex: 1) */
  gap: 1em; /* row and column spacing */
}

html body form label {
  display: contents; /* makes label text + input align directly on grid */
}

input, textarea {
  font: inherit;
  grid-column: 1 / -1;
  box-sizing: border-box;
}

button {
  grid-column: 1 / -1; /* make button span both columns */
  font: inherit;
}

.projects{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(15em, 1fr)); /* make the grid have as many columns as can fit in the container, each with a minimum width of 15em and a maximum width of 1fr (i.e. the remaining space) */
}

article{
  grid-template-rows: subgrid; 
  grid-row: span 3; /* each <article> should span 3 rows without having to specify the starting row. */ 
  gap: 1em;
}

h2{
  margin: 0;
}

body h1{
  font-size: 4em; /* The default <h1> size is very close to the default <h2> size, violating the design principle of contrast. Make it significantly larger (400% the body text) */
}

h1, h2, h3, h4, h5, h6{
  line-height: 1.1;
}

dl {
  display: grid;
  grid-template-columns: repeat(4, 1fr); 
  grid-auto-rows: auto;
  gap: 0.5rem 1rem;
}

dt {
  grid-row: 1;
  text-align: center;
  font-weight: bold;
}

dd {
  grid-row: 2;
  text-align: center;
  margin: 0;
}

#projects-pie-plot {
  max-width: 20em;
  margin-block: 2em;

  overflow: visible;
}

.legend {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(9em, 1fr)); /* responsive layout */
  gap: 0.5em 1em; /* spacing between items */
  list-style: none; /* remove default bullets */
  padding: 1em;
  margin: 1em 0; 
  border: 1px solid #ccc; 
  flex: 1; /* occupy all available width */
}

/* Each legend item */
.legend li {
  display: flex;
  align-items: center; /* vertically center swatch and text */
  gap: 0.5em; /* horizontal space between swatch and label */
  font-family: sans-serif;
}

/* Swatch styling */
.legend .swatch {
  display: inline-block;
  aspect-ratio: 1 / 1; /* square or circle */
  width: 1em; /* controls size */
  background-color: var(--color); /* inherits from parent element */
  border-radius: 50%; /* makes it a circle; reduce to e.g. 10% for rounded square */
}

/* Add a hover effect to the wedges. What about fading out all other wedges when a wedge is hovered? 
We can target the <svg> element when it contains a hovered <path> by using the :has() pseudo-class: 
Why not just use :hover instead of :has(path:hover)? Because the <svg> can be covered without any of the wedges being hovered, and then all wedges would be faded out. */
&:has(path:hover) {
  path:not(:hover) {
    opacity: 0.5;
  }

  path { /* transition */
    transition: 300ms;
    cursor: pointer;
  }
}

.selected {
  --color: oklch(60% 45% 0) !important; /* we add !important because we are trying to override the --color variable set via the style attribute, which has higher precedence than any selector. */

  &:is(path) {
    fill: var(--color);
  }
}

circle {
  transition: 200ms;
  transform-origin: center;
  transform-box: fill-box;
}

/* make selected circle from brush stand out */
circle.selected {
  fill: #ff6b6b;
}

circle:hover {
  transform: scale(1.5);
}

/*Tooltip transition*/
dl.info {
  /* ... other styles ... */
  transition-duration: 500ms;
  transition-property: opacity, visibility;
}

dl.info[hidden]:not(:hover, :focus-within) {
  opacity: 0;
  visibility: hidden;
}

#commit-tooltip {
  position: absolute;
  pointer-events: none; /* so it doesn’t block hovering */
  background-color: rgba(255, 255, 255, 0.85);
  color: black;
  padding: 5px 8px;
  border-radius: 4px;
  font-size: 0.9em;
}

/*Styling selection rectangle for brush */
@keyframes marching-ants {
  to {
    stroke-dashoffset: -8; /* 5 + 3 */
  }
}

.selection {
  fill-opacity: 0.1;
  stroke: black;
  stroke-opacity: 0.7;
  stroke-dasharray: 5 3;
  animation: marching-ants 2s linear infinite;
}